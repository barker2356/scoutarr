<!DOCTYPE html>
<html lang="en" class="antialiased">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scoutarr Media Hub</title>
    
    <!-- Tailwind CSS (Stable CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js (Specific Version for Stability) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Merriweather', 'serif'],
                    },
                    colors: {
                        slate: {
                            850: '#1e293b', 
                            900: '#0f172a', 
                        }
                    }
                }
            }
        }
    </script>

    <!-- Theme Initialization (Prevents Flash) -->
    <script>
        try {
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        } catch (e) {
            console.warn('Local storage restricted.');
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Merriweather:ital,wght@1,300&display=swap');

        body {
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Chart Container Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container { height: 350px; }
        }

        .logo-symbol { transition: transform 0.3s ease; }
        .logo-container:hover .logo-symbol { transform: scale(1.1) rotate(5deg); }

        .portal-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .portal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .dark .portal-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.3);
            border-color: #4f46e5;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen bg-gray-50 text-gray-900 dark:bg-slate-900 dark:text-gray-100 transition-colors duration-300">

    <!-- Navigation -->
    <nav class="bg-white border-b border-gray-200 sticky top-0 z-50 dark:bg-slate-800 dark:border-slate-700 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <!-- Logo (Click handled by JS) -->
                <div id="nav-logo" class="flex items-center logo-container cursor-pointer">
                    <div class="flex-shrink-0 flex items-center">
                        <div class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center mr-3 shadow-md logo-symbol">
                            <i class="fas fa-play text-white text-lg ml-1"></i>
                        </div>
                        <span class="font-extrabold text-xl tracking-tight text-gray-900 dark:text-white">SCOUTARR<span class="text-indigo-600 dark:text-indigo-400">MEDIA</span></span>
                    </div>
                </div>

                <!-- Controls -->
                <div class="flex items-center space-x-4">
                    <button id="theme-toggle" class="p-2 rounded-lg text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-slate-700 focus:outline-none transition-colors" aria-label="Toggle Dark Mode">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:inline text-yellow-400"></i>
                    </button>
                    
                    <span class="hidden sm:inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 transition-colors">
                        <!-- ID added to status dot to control it via JS -->
                        <span id="status-dot" class="w-2 h-2 mr-1 bg-gray-400 rounded-full"></span>
                        System Online
                    </span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow">
        <!-- Hero -->
        <div class="bg-white border-b border-gray-200 dark:bg-slate-900 dark:border-slate-800 transition-colors duration-300">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16 text-center">
                <p class="text-sm font-semibold text-indigo-600 dark:text-indigo-400 tracking-wide uppercase mb-2">Welcome to your media hub</p>
                <div class="max-w-4xl mx-auto">
                    <h1 class="text-4xl font-extrabold text-gray-900 dark:text-white sm:text-5xl md:text-6xl mb-8 transition-colors">
                        Stream. Request. <span class="text-indigo-600 dark:text-indigo-400">Enjoy.</span>
                    </h1>
                    
                    <!-- Quote Component -->
                    <div class="relative bg-gray-50 rounded-2xl p-8 sm:p-10 shadow-inner border border-gray-100 dark:bg-slate-800 dark:border-slate-700 transition-colors duration-300">
                        <i class="fas fa-quote-left text-4xl text-gray-200 dark:text-slate-600 absolute top-4 left-4 transition-colors"></i>
                        <div id="quote-container" class="transition-opacity duration-500 opacity-100 min-h-[100px] flex flex-col justify-center items-center">
                            <p id="quote-text" class="font-serif text-xl sm:text-2xl text-gray-700 dark:text-gray-200 italic mb-4 leading-relaxed transition-colors">
                                "Initializing core systems..."
                            </p>
                            <p id="quote-source" class="text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest transition-colors">
                                - System
                            </p>
                        </div>
                        <div class="mt-6 flex justify-center space-x-4">
                            <button id="btn-prev" class="p-2 text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors" aria-label="Previous quote">
                                <i class="fas fa-step-backward"></i>
                            </button>
                            <button id="btn-pause" class="p-2 text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors" aria-label="Pause rotation">
                                <i class="fas fa-pause"></i>
                            </button>
                            <button id="btn-next" class="p-2 text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors" aria-label="Next quote">
                                <i class="fas fa-step-forward"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cards -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="text-center mb-12">
                <h2 class="text-base text-indigo-600 dark:text-indigo-400 font-semibold tracking-wide uppercase">Applications</h2>
                <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 dark:text-white sm:text-4xl transition-colors">Access The Archives</p>
                <p class="mt-4 max-w-2xl text-xl text-gray-500 dark:text-gray-400 mx-auto transition-colors">Select a destination to manage requests, listen to books, or start watching.</p>
            </div>

            <div class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4">
                <!-- Plex -->
                <a href="https://app.plex.tv" target="_blank" class="portal-card bg-white dark:bg-slate-800 overflow-hidden rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 group relative block transition-colors duration-300">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center text-white text-2xl shadow-sm">
                                <i class="fas fa-chevron-right"></i>
                            </div>
                            <i class="fas fa-external-link-alt text-gray-300 dark:text-slate-600 group-hover:text-yellow-500 dark:group-hover:text-yellow-400 transition-colors"></i>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 dark:text-white transition-colors">Plex</h3>
                        <p class="mt-2 text-sm text-gray-500 dark:text-gray-400 transition-colors">Log in to your account and start streaming movies and TV shows.</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-slate-700/50 px-6 py-4 border-t border-gray-100 dark:border-slate-700 group-hover:bg-yellow-50 dark:group-hover:bg-slate-700 transition-colors">
                        <span class="text-sm font-medium text-yellow-600 dark:text-yellow-400">Launch Plex &rarr;</span>
                    </div>
                </a>

                <!-- Overseerr -->
                <a href="#" class="portal-card bg-white dark:bg-slate-800 overflow-hidden rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 group relative block transition-colors duration-300">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-indigo-600 rounded-lg flex items-center justify-center text-white text-2xl shadow-sm">
                                <i class="fas fa-search"></i>
                            </div>
                            <i class="fas fa-external-link-alt text-gray-300 dark:text-slate-600 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"></i>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 dark:text-white transition-colors">Overseerr</h3>
                        <p class="mt-2 text-sm text-gray-500 dark:text-gray-400 transition-colors">Request new Movies and TV Shows for the server automatically.</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-slate-700/50 px-6 py-4 border-t border-gray-100 dark:border-slate-700 group-hover:bg-indigo-50 dark:group-hover:bg-slate-700 transition-colors">
                        <span class="text-sm font-medium text-indigo-600 dark:text-indigo-400">Make Request &rarr;</span>
                    </div>
                </a>

                <!-- Audiobookshelf -->
                <a href="#" class="portal-card bg-white dark:bg-slate-800 overflow-hidden rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 group relative block transition-colors duration-300">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-emerald-600 rounded-lg flex items-center justify-center text-white text-2xl shadow-sm">
                                <i class="fas fa-headphones"></i>
                            </div>
                            <i class="fas fa-external-link-alt text-gray-300 dark:text-slate-600 group-hover:text-emerald-600 dark:group-hover:text-emerald-400 transition-colors"></i>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 dark:text-white transition-colors">Audiobookshelf</h3>
                        <p class="mt-2 text-sm text-gray-500 dark:text-gray-400 transition-colors">Access your library of audiobooks and podcasts anywhere.</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-slate-700/50 px-6 py-4 border-t border-gray-100 dark:border-slate-700 group-hover:bg-emerald-50 dark:group-hover:bg-slate-700 transition-colors">
                        <span class="text-sm font-medium text-emerald-600 dark:text-emerald-400">Listen Now &rarr;</span>
                    </div>
                </a>

                <!-- Book Request -->
                <a href="mailto:admin@scoutarr.media?subject=Book%20Request" class="portal-card bg-white dark:bg-slate-800 overflow-hidden rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 group relative block transition-colors duration-300">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-rose-500 rounded-lg flex items-center justify-center text-white text-2xl shadow-sm">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <i class="fas fa-paper-plane text-gray-300 dark:text-slate-600 group-hover:text-rose-500 dark:group-hover:text-rose-400 transition-colors"></i>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 dark:text-white transition-colors">Request Books</h3>
                        <p class="mt-2 text-sm text-gray-500 dark:text-gray-400 transition-colors">Submit requests for specific Audiobooks or Ebooks to be added.</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-slate-700/50 px-6 py-4 border-t border-gray-100 dark:border-slate-700 group-hover:bg-rose-50 dark:group-hover:bg-slate-700 transition-colors">
                        <span class="text-sm font-medium text-rose-600 dark:text-rose-400">Send Request &rarr;</span>
                    </div>
                </a>
            </div>
        </div>

        <!-- Charts -->
        <div class="bg-white dark:bg-slate-900 py-12 border-t border-gray-200 dark:border-slate-800 transition-colors duration-300">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-10">
                    <h2 class="text-base text-indigo-600 dark:text-indigo-400 font-semibold tracking-wide uppercase">Server Insights</h2>
                    <p class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 dark:text-white transition-colors">Live Library Statistics</p>
                    <p class="mt-4 max-w-2xl text-lg text-gray-500 dark:text-gray-400 mx-auto transition-colors">Real-time breakdown of available content.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                    <div class="bg-gray-50 dark:bg-slate-800 rounded-xl p-6 shadow-inner border border-gray-100 dark:border-slate-700 transition-colors duration-300">
                        <h3 class="text-lg font-bold text-gray-800 dark:text-gray-200 mb-4 text-center transition-colors">Media Type Distribution</h3>
                        <div class="chart-container">
                            <canvas id="distributionChart"></canvas>
                        </div>
                        <p class="text-xs text-center text-gray-400 dark:text-gray-500 mt-4">*Updates every 24 hours</p>
                    </div>

                    <div class="bg-gray-50 dark:bg-slate-800 rounded-xl p-6 shadow-inner border border-gray-100 dark:border-slate-700 transition-colors duration-300">
                        <h3 class="text-lg font-bold text-gray-800 dark:text-gray-200 mb-4 text-center transition-colors">Top Requested Genres</h3>
                        <div class="chart-container">
                            <canvas id="genreChart"></canvas>
                        </div>
                        <p class="text-xs text-center text-gray-400 dark:text-gray-500 mt-4">*Based on Overseerr data</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white border-t border-gray-800 transition-colors">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="flex justify-center">
                <div class="flex items-center">
                    <div class="w-8 h-8 bg-indigo-600 rounded flex items-center justify-center mr-2">
                         <i class="fas fa-play text-white text-xs"></i>
                    </div>
                    <span class="text-lg font-bold tracking-wider">SCOUTARR</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // --- Data ---
        const quotes = [
            { text: "I'm going to make him an offer he can't refuse.", source: "The Godfather" },
            { text: "May the Force be with you.", source: "Star Wars" },
            { text: "There's no place like home.", source: "The Wizard of Oz" },
            { text: "I'm the king of the world!", source: "Titanic" },
            { text: "Carpe diem. Seize the day, boys. Make your lives extraordinary.", source: "Dead Poets Society" },
            { text: "Elementary, my dear Watson.", source: "The Adventures of Sherlock Holmes" },
            { text: "It's alive! It's alive!", source: "Frankenstein" },
            { text: "My mama always said life was like a box of chocolates. You never know what you're gonna get.", source: "Forrest Gump" },
            { text: "I'll be back.", source: "The Terminator" },
            { text: "You're gonna need a bigger boat.", source: "Jaws" },
            { text: "Here's looking at you, kid.", source: "Casablanca" },
            { text: "My precious.", source: "The Two Towers" },
            { text: "Houston, we have a problem.", source: "Apollo 13" },
            { text: "There's no crying in baseball!", source: "A League of Their Own" },
            { text: "E.T. phone home.", source: "E.T." },
            { text: "You can't handle the truth!", source: "A Few Good Men" },
            { text: "A martini. Shaken, not stirred.", source: "Goldfinger" },
            { text: "Life is a banquet, and most poor suckers are starving to death!", source: "Auntie Mame" },
            { text: "If you build it, he will come.", source: "Field of Dreams" },
            { text: "Keep your friends close, but your enemies closer.", source: "The Godfather Part II" },
            { text: "I feel the needâ€”the need for speed!", source: "Top Gun" },
            { text: "What we've got here is failure to communicate.", source: "Cool Hand Luke" },
            { text: "Roads? Where we're going we don't need roads.", source: "Back to the Future" },
            { text: "To infinity and beyond!", source: "Toy Story" },
            { text: "Chewie, we're home.", source: "Star Wars: The Force Awakens" },
            { text: "I am Iron Man.", source: "Avengers: Endgame" },
            { text: "Why so serious?", source: "The Dark Knight" },
            { text: "I drink your milkshake!", source: "There Will Be Blood" },
            { text: "The first rule of Fight Club is: You do not talk about Fight Club.", source: "Fight Club" },
            { text: "Say 'hello' to my little friend!", source: "Scarface" },
            { text: "I see dead people.", source: "The Sixth Sense" },
            { text: "Winter is coming.", source: "Game of Thrones" },
            { text: "I am the one who knocks!", source: "Breaking Bad" },
            { text: "Bazinga!", source: "The Big Bang Theory" },
            { text: "How you doin'?", source: "Friends" },
            { text: "D'oh!", source: "The Simpsons" },
            { text: "Wubba Lubba Dub Dub!", source: "Rick and Morty" },
            { text: "Treat. Yo. Self.", source: "Parks and Recreation" },
            { text: "Bears, Beets, Battlestar Galactica.", source: "The Office" },
            { text: "Clear eyes, full hearts, can't lose.", source: "Friday Night Lights" },
            { text: "Yada, yada, yada.", source: "Seinfeld" },
            { text: "Live long and prosper.", source: "Star Trek" },
            { text: "The truth is out there.", source: "The X-Files" },
            { text: "Don't blink.", source: "Doctor Who" },
            { text: "Not all those who wander are lost.", source: "The Lord of the Rings" },
            { text: "Just keep swimming.", source: "Finding Nemo" },
            { text: "I voluntarily acknowledge that I am in a state of terror.", source: "The Good Place" },
            { text: "Good morning, and in case I don't see you, good afternoon, good evening, and good night!", source: "The Truman Show" },
            { text: "Do or do not. There is no try.", source: "The Empire Strikes Back" },
            { text: "Nobody puts Baby in a corner.", source: "Dirty Dancing" },
            { text: "I'll have what she's having.", source: "When Harry Met Sally" },
            { text: "You talkin' to me?", source: "Taxi Driver" },
            { text: "I love the smell of napalm in the morning.", source: "Apocalypse Now" },
            { text: "Show me the money!", source: "Jerry Maguire" },
            { text: "You had me at 'hello'.", source: "Jerry Maguire" },
            { text: "Hasta la vista, baby.", source: "Terminator 2: Judgment Day" },
            { text: "Bond. James Bond.", source: "Dr. No" },
            { text: "We'll always have Paris.", source: "Casablanca" },
            { text: "This is the beginning of a beautiful friendship.", source: "Casablanca" },
            { text: "She doesn't even go here!", source: "Mean Girls" },
            { text: "As if!", source: "Clueless" },
            { text: "Inconceivable!", source: "The Princess Bride" },
            { text: "My name is Inigo Montoya. You killed my father. Prepare to die.", source: "The Princess Bride" },
            { text: "The dude abides.", source: "The Big Lebowski" },
            { text: "I'm in a glass case of emotion!", source: "Anchorman" },
            { text: "That is so fetch.", source: "Mean Girls" },
            { text: "Florals? For spring? Groundbreaking.", source: "The Devil Wears Prada" },
            { text: "Honey, where is my super suit?", source: "The Incredibles" },
            { text: "Adventure is out there!", source: "Up" },
            { text: "Wakanda Forever!", source: "Black Panther" },
            { text: "I can do this all day.", source: "Captain America: The First Avenger" },
            { text: "We have a Hulk.", source: "The Avengers" },
            { text: "Puny god.", source: "The Avengers" },
            { text: "Get to the chopper!", source: "Predator" },
            { text: "They may take our lives, but they'll never take our freedom!", source: "Braveheart" },
            { text: "Are you not entertained?", source: "Gladiator" },
            { text: "This is Sparta!", source: "300" }
        ];

        const serverStats = {
            distribution: {
                labels: ['Movies', 'TV Shows', 'Audiobooks', 'Music'],
                data: [450, 120, 85, 45]
            },
            genres: {
                labels: ['Sci-Fi', 'Action', 'Drama', 'Comedy', 'Thriller'],
                data: [35, 25, 20, 15, 5]
            }
        };

        const appState = {
            currentQuoteIndex: 0,
            isRotating: true,
            rotateInterval: null,
            charts: {}
        };

        // --- Logic ---
        const app = {
            init: function() {
                this.attachListeners();
                this.setupQuotes();
                this.renderCharts();
                
                // Set initial quote
                appState.currentQuoteIndex = Math.floor(Math.random() * quotes.length);
                this.updateQuoteDisplay();

                // Indicate System Ready
                const dot = document.getElementById('status-dot');
                if (dot) {
                    dot.classList.remove('bg-gray-400');
                    dot.classList.add('bg-green-400', 'animate-pulse');
                }
            },

            attachListeners: function() {
                // Theme Toggle
                document.getElementById('theme-toggle').addEventListener('click', () => this.toggleTheme());
                // Scroll Top
                document.getElementById('nav-logo').addEventListener('click', () => window.scrollTo({top: 0, behavior: 'smooth'}));
                // Quote Controls
                document.getElementById('btn-prev').addEventListener('click', () => this.previousQuote());
                document.getElementById('btn-pause').addEventListener('click', () => this.toggleAutoRotate());
                document.getElementById('btn-next').addEventListener('click', () => this.nextQuote());
            },

            toggleTheme: function() {
                const isDark = document.documentElement.classList.contains('dark');
                if (isDark) {
                    document.documentElement.classList.remove('dark');
                    try { localStorage.setItem('theme', 'light'); } catch(e){}
                } else {
                    document.documentElement.classList.add('dark');
                    try { localStorage.setItem('theme', 'dark'); } catch(e){}
                }
                this.updateChartsTheme();
            },

            setupQuotes: function() {
                this.startRotation();
            },

            startRotation: function() {
                if (appState.rotateInterval) clearInterval(appState.rotateInterval);
                appState.rotateInterval = setInterval(() => this.nextQuote(), 8000);
                appState.isRotating = true;
                this.updatePauseIcon();
            },

            stopRotation: function() {
                if (appState.rotateInterval) clearInterval(appState.rotateInterval);
                appState.isRotating = false;
                this.updatePauseIcon();
            },

            toggleAutoRotate: function() {
                if (appState.isRotating) this.stopRotation();
                else this.startRotation();
            },

            updatePauseIcon: function() {
                const icon = document.querySelector('#btn-pause i');
                if (!icon) return;
                icon.className = appState.isRotating ? 'fas fa-pause' : 'fas fa-play';
            },

            nextQuote: function() {
                appState.currentQuoteIndex = (appState.currentQuoteIndex + 1) % quotes.length;
                this.updateQuoteDisplay();
            },

            previousQuote: function() {
                appState.currentQuoteIndex = (appState.currentQuoteIndex - 1 + quotes.length) % quotes.length;
                this.updateQuoteDisplay();
                if (appState.isRotating) this.startRotation(); 
            },

            updateQuoteDisplay: function() {
                const container = document.getElementById('quote-container');
                const textEl = document.getElementById('quote-text');
                const sourceEl = document.getElementById('quote-source');

                if (!container) return;

                container.classList.remove('opacity-100');
                container.classList.add('opacity-0');

                setTimeout(() => {
                    textEl.textContent = `"${quotes[appState.currentQuoteIndex].text}"`;
                    sourceEl.textContent = `- ${quotes[appState.currentQuoteIndex].source}`;
                    container.classList.remove('opacity-0');
                    container.classList.add('opacity-100');
                }, 500);
            },

            renderCharts: function() {
                const ctxDist = document.getElementById('distributionChart');
                const ctxGenre = document.getElementById('genreChart');
                
                // Only attempt render if elements exist
                if (ctxDist && typeof Chart !== 'undefined') {
                    appState.charts.distribution = new Chart(ctxDist, {
                        type: 'doughnut',
                        data: {
                            labels: serverStats.distribution.labels,
                            datasets: [{
                                data: serverStats.distribution.data,
                                backgroundColor: ['#4F46E5', '#F59E0B', '#10B981', '#F43F5E'],
                                borderWidth: 0,
                                hoverOffset: 4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'right',
                                    labels: { usePointStyle: true, font: { family: 'Inter', size: 12 }, color: this.getTextColor() }
                                }
                            },
                            layout: { padding: 20 }
                        }
                    });
                }

                if (ctxGenre && typeof Chart !== 'undefined') {
                    appState.charts.genre = new Chart(ctxGenre, {
                        type: 'bar',
                        data: {
                            labels: serverStats.genres.labels,
                            datasets: [{
                                label: 'Requests',
                                data: serverStats.genres.data,
                                backgroundColor: '#4F46E5',
                                borderRadius: 4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: { color: this.getGridColor() },
                                    ticks: { color: this.getTextColor() }
                                },
                                x: {
                                    grid: { display: false },
                                    ticks: { color: this.getTextColor() }
                                }
                            }
                        }
                    });
                }
            },

            updateChartsTheme: function() {
                const textColor = this.getTextColor();
                const gridColor = this.getGridColor();

                if (appState.charts.distribution) {
                    appState.charts.distribution.options.plugins.legend.labels.color = textColor;
                    appState.charts.distribution.update();
                }
                if (appState.charts.genre) {
                    appState.charts.genre.options.scales.y.grid.color = gridColor;
                    appState.charts.genre.options.scales.y.ticks.color = textColor;
                    appState.charts.genre.options.scales.x.ticks.color = textColor;
                    appState.charts.genre.update();
                }
            },

            getTextColor: function() {
                return document.documentElement.classList.contains('dark') ? '#e5e7eb' : '#374151';
            },

            getGridColor: function() {
                return document.documentElement.classList.contains('dark') ? '#374151' : '#e5e7eb';
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => app.init());

    </script>
</body>
</html>
